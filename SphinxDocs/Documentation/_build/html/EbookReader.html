
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>EbookReader &#8212; PythonProjects  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="CraigsListScraper" href="Scraper.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-EbookReader">
<span id="ebookreader"></span><h1>EbookReader<a class="headerlink" href="#module-EbookReader" title="Permalink to this headline">¶</a></h1>
<p>Created by Ross Dingwall. EbookReader.py is a script to parse directories of epub files and return DataFrames containing
information regarding the word frequency and sentences used within those files.</p>
<dl>
<dt>Known Bugs:</dt><dd><ul class="simple">
<li><p>Currently the code will see the author “John Smith” as different from “Smith, John”. While a function could be put</p></li>
</ul>
<p>in place to resolve this. I believe it may lead to more issues, when a manual review of the data would resolve this
swiftly. However, for very large DataSets, this bug may be better resolved automatically.</p>
</dd>
</dl>
<p>#TODO - Expand the code to work on Linux as well as Windows
#TODO - Move import statements into the functions that use them to allow them to be properly called from outside the main
#TODO - Move Graphic Functions like “word_cloud_creation” to it’s own script
#TODO - Create the output directory and it’s structure if it’s not already in place</p>
<dl class="py function">
<dt id="EbookReader.arguments">
<code class="sig-prename descclassname">EbookReader.</code><code class="sig-name descname">arguments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#EbookReader.arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses all the required arguments and returns them as the “args” object
:return args: Namespace object containing the parsed value for the argument assigned to it’s corresponding name</p>
</dd></dl>

<dl class="py function">
<dt id="EbookReader.book_analysis">
<code class="sig-prename descclassname">EbookReader.</code><code class="sig-name descname">book_analysis</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">config</span></em><span class="sig-paren">)</span><a class="headerlink" href="#EbookReader.book_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>A function which takes the config created by the config builder, iterates through all the stored filepaths and there
details, and extracts information on each word, and sentence used by the author of the book. This information is stored
in DataFrame objects, and the word DataFrame is normalised before being returned.
:param config: The dictionary object config, created by config_builder (based on a source_directory)
:return final_sentence_df: A DataFrame object containing each sentence the author wrote, and in what book they wrote it.
:return final_word_df: A DataFrame object containing each word an author used, the total words the author used, and
the normalised ratio of that word against all words used by the author for comparison against other authors.</p>
</dd></dl>

<dl class="py function">
<dt id="EbookReader.book_reader">
<code class="sig-prename descclassname">EbookReader.</code><code class="sig-name descname">book_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">chapter_flag</span></em>, <em class="sig-param"><span class="n">author</span></em>, <em class="sig-param"><span class="n">language</span><span class="o">=</span><span class="default_value">'english'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#EbookReader.book_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>This parameter takes the path of an epub file and extracts the text from it into a dataframe of sentences, and a
dictionary containing each word and the frequency it occurs in the book
:param path: Path to the epub file
:param chapter_flag: The flag that the epub uses to identify chapters
:param author: The author for the book
:param language: The language the book is written in (defaults to english)
:return sentence_df: A DataFrame object that contains the author and all the sentences used in the book
:return word_dict: A dictionary object that contains all the words used in the book (as a key) and it’s count</p>
</dd></dl>

<dl class="py function">
<dt id="EbookReader.config_builder">
<code class="sig-prename descclassname">EbookReader.</code><code class="sig-name descname">config_builder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_directory</span></em><span class="sig-paren">)</span><a class="headerlink" href="#EbookReader.config_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A function that builds a config for the book_analysis function. It scans through a provided directory and for each
epub file it finds, it parses the file and looks for the most frequent term used, once numerical values have been
stripped away (chapter1,chapter2 etc. becomes chapter).
:param source_directory: The directory containing the epub files. Must be structured such that the author’s name is the
:return output_dict: A dictionary object that can be used as the config for the Book Analysis function. It contains:
a list of epub filepaths in the source directory, what author they are from, what the title is, and what term designates a chapter</p>
</dd></dl>

<dl class="py function">
<dt id="EbookReader.main">
<code class="sig-prename descclassname">EbookReader.</code><code class="sig-name descname">main</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_directory</span></em>, <em class="sig-param"><span class="n">output_directory</span></em><span class="sig-paren">)</span><a class="headerlink" href="#EbookReader.main" title="Permalink to this definition">¶</a></dt>
<dd><p>The main function of the EbookReader code. This function runs all the others in order, first creating the config from
the source directory, then analysing the contents of the files in the config, before outputing the raw data as csv’s
and wordclouds for each author to the provided output directory
:param source_directory: The directory on your system containing all the epub files
:param output_directory: The directory on your system you wish to place the outputs</p>
</dd></dl>

<dl class="py function">
<dt id="EbookReader.word_cloud_creation">
<code class="sig-prename descclassname">EbookReader.</code><code class="sig-name descname">word_cloud_creation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataframe</span></em>, <em class="sig-param"><span class="n">key_column</span></em>, <em class="sig-param"><span class="n">value_column</span></em>, <em class="sig-param"><span class="n">title</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#EbookReader.word_cloud_creation" title="Permalink to this definition">¶</a></dt>
<dd><p>A function for creating wordcloud objects based on a DataFrame and two column names
(one for the key, and one for the values)
:param dataframe: The Dataframe containing the WordCloud information
:param key_column: The name for the DataFrame column containing the words
:param value_column: The name for the DataFrame column containing the float value you wish to associate with the Words
:param title: Defaults to None, but if a Title is provided it will be added to the WordCloud
:return:</p>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PythonProjects</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Projects.html">Ross Dingwall’s Python Projects</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Reader.html">RedditWritingPrompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Scraper.html">CraigsListScraper</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">EbookReader</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Projects.html#module-EbookReader">EbookReader module</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="Projects.html">Ross Dingwall’s Python Projects</a><ul>
      <li>Previous: <a href="Scraper.html" title="previous chapter">CraigsListScraper</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Ross Dingwall.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/EbookReader.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>